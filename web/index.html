<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Raven Network Monitoring</title>
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.svg" type="image/svg+xml">
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="styles.css" rel="stylesheet">
    <style>
        /* Enhanced styles for new features */
        .ip-check-indicator {
            display: inline-flex;
            align-items: center;
            gap: 0.25rem;
            font-size: 0.75rem;
            padding: 0.125rem 0.375rem;
            border-radius: 0.25rem;
            margin-left: 0.5rem;
        }

        .ip-check-ok {
            background: #dcfce7;
            color: #16a34a;
        }

        .ip-check-fail {
            background: #fee2e2;
            color: #dc2626;
        }

        .soft-fail-indicator {
            display: inline-flex;
            align-items: center;
            gap: 0.25rem;
            font-size: 0.75rem;
            font-weight: 600;
            color: var(--warning-color);
        }

        .ok-duration {
            display: inline-flex;
            align-items: center;
            gap: 0.25rem;
            font-size: 0.75rem;
            color: var(--success-color);
            font-weight: 500;
        }

        .status-details {
            display: flex;
            flex-direction: column;
            gap: 0.25rem;
        }

        .status-main {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .status-meta {
            font-size: 0.75rem;
            color: var(--text-muted);
        }

        .host-details {
            display: flex;
            flex-direction: column;
            gap: 0.25rem;
        }

        .host-address {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .host-address-main {
            font-weight: 500;
        }

        .host-address-alt {
            font-size: 0.875rem;
            color: var(--text-muted);
        }

        .enhanced-status-badge {
            display: flex;
            flex-direction: column;
            gap: 0.25rem;
            align-items: flex-start;
        }
    </style>
</head>
<body>
    <div id="app" :data-theme="theme" class="app" :class="{ 'sidebar-collapsed': sidebarCollapsed }">
        <!-- Sidebar Overlay for Mobile -->
        <div class="sidebar-overlay" :class="{ active: sidebarOpen }" @click="closeSidebar"></div>
        
        <!-- Sidebar Component -->
        <sidebar-component 
            :current-view="currentView"
            :sidebar-open="sidebarOpen"
            :sidebar-collapsed="sidebarCollapsed"
            :web-config="webConfig"
            @set-view="setView"
            @toggle-sidebar-collapse="toggleSidebarCollapse">
        </sidebar-component>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Header Component -->
            <header-component 
                :page-title="pageTitle"
                :connected="connected"
                :theme="theme"
                :current-view="currentView"
                @toggle-sidebar="toggleSidebar"
                @toggle-theme="toggleTheme"
                @open-add-host-modal="openAddHostModal">
            </header-component>

            <!-- Dashboard View -->
            <dashboard-view 
                v-if="currentView === 'dashboard'"
                :stats="stats"
                :recent-activity="recentActivity">
            </dashboard-view>

            <!-- Hosts View -->
            <hosts-view 
                v-if="currentView === 'hosts'"
                :hosts="hosts"
                :loading="loading"
                :search-query="searchQuery"
                :filter-group="filterGroup"
                :groups="groups"
                :filtered-hosts="filteredHosts"
                @update:search-query="searchQuery = $event"
                @update:filter-group="filterGroup = $event"
                @edit-host="editHost"
                @delete-host="deleteHost">
            </hosts-view>

            <!-- Checks View -->
            <checks-view 
                v-if="currentView === 'checks'"
                :checks="checks"
                :loading="loading"
                :search-checks-query="searchChecksQuery"
                :filter-check-type="filterCheckType"
                :check-types="checkTypes"
                :filtered-checks="filteredChecks"
                @update:search-checks-query="searchChecksQuery = $event"
                @update:filter-check-type="filterCheckType = $event"
                @open-add-check-modal="openAddCheckModal"
                @edit-check="editCheck"
                @delete-check="deleteCheck">
            </checks-view>

            <!-- Alerts View -->
            <alerts-view 
                v-if="currentView === 'alerts'"
                :alerts="alerts"
                :loading="loading"
                :alert-metrics="alertMetrics"
                :alert-filter="alertFilter"
                :filtered-alerts="filteredAlerts"
                @update:alert-filter="alertFilter = $event">
            </alerts-view>

            <!-- About View -->
            <about-view 
                v-if="currentView === 'about'"
                :build-info="buildInfo"
                :loading-build-info="loadingBuildInfo"
                :web-config="webConfig">
            </about-view>

            <!-- Settings View -->
            <settings-view 
                v-if="currentView === 'settings'"
                :settings="settings"
                :connected="connected"
                :build-info="buildInfo"
                :web-config="webConfig"
                @toggle-theme="toggleTheme"
                @export-config="exportConfig"
                @refresh-data="refreshData">
            </settings-view>
        </div>

        <!-- Host Modal -->
        <host-modal 
            :show="showHostModal"
            :editing="editingHost"
            :form="hostForm"
            :saving="saving"
            @close="closeHostModal"
            @save="saveHost">
        </host-modal>

        <!-- Check Modal -->
        <check-modal 
            :show="showCheckModal"
            :editing="editingCheck"
            :form="checkForm"
            :hosts="hosts"
            :saving="saving"
            @close="closeCheckModal"
            @save="saveCheck">
        </check-modal>

        <!-- Notification -->
        <notification-component :notification="notification"></notification-component>
    </div>

    <!-- Load utility functions first -->
    <script src="js/utils.js"></script>
    <script src="js/api.js"></script>

    <!-- Load all components -->
    <script src="js/components/sidebar.js"></script>
    <script src="js/components/header.js"></script>
    <script src="js/components/dashboard-view.js"></script>
    <script src="js/components/hosts-view.js"></script>
    <script src="js/components/checks-view.js"></script>
    <script src="js/components/alerts-view.js"></script>
    <script src="js/components/about-view.js"></script>
    <script src="js/components/settings-view.js"></script>
    <script src="js/components/host-modal.js"></script>
    <script src="js/components/check-modal.js"></script>
    <script src="js/components/notification.js"></script>

    <!-- Load main app last -->
    <script src="js/app.js"></script>
</body>
</html>
